# Benchopt configuration for distributed benchmarking
# This file specifies testing with 2 distributed processes

# Objective filter
objective:
  - reconstruction_objective

# Dataset filters (with parameters) - smaller size for faster distributed test
dataset:
  - highres_color_image:
      image_size: 2048
      num_operators: 8
      noise_level: 0.1

# Solver filters (with parameters) - distributed version
solver:
  - PnP:
      denoiser: drunet
      denoiser_sigma: 0.005
      step_size: 0.1
      patch_size: 256
      receptive_field_size: 64
      max_batch_size: 8
      init_method: ["zeros"]
      slurm_gres, slurm_tasks_per_node, distribute_physics, distribute_denoiser: [
        ["gpu:1", 1, false, false],
        ["gpu:2", 2, true, true],
      ]


# Run parameters
max-runs: 10
n-repetitions: 1
plot: true
html: true
